<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8" />

        <link
            href="https://fonts.googleapis.com/css?family=Muli"
            rel="stylesheet"
        />

        <!-- <script src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script> -->
        <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>-->

        <script src="js/bundle.js"></script>
        <script
            src="https://apis.google.com/js/platform.js"
            async
            defer
        ></script>
        <!--<script src="jquery.tools.1.2.6.min.js"></script>-->

        <!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
        integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"
        integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa"
        crossorigin="anonymous"></script> -->

        <!-- <script src="/queue/js/util/util.js"></script> -->
        <!-- <script src="/queue/js/require.js" data-main="build/main.js"></script> -->
        <link rel="stylesheet" href="/css/queue.css" />

        <title>OH Queue</title>
        <meta name="author" content="James Juett" />
        <meta name="google-signin-scope" content="email" />
        <meta
            name="google-signin-client_id"
            content="845191182055-up8bv3ff7bn418h0avfouaim0upho4h8.apps.googleusercontent.com"
        />

        <meta name="viewport" content="width=device-width, initial-scale=1.0" />

        <style>
            #signupMessage {
                color: red;
            }

            #signupMessage.ok {
                color: inherit;
            }
        </style>
    </head>

    <!-- Hi Mom! All operations are validated on the serverside. Don't waste your time. :) -->

    <body class="notSuper">
        <script>
            function onSignIn(googleUser) {
                Bundle.onSignIn(googleUser);
            }
        </script>
        <div class="page-header" style="text-align: center;">
            <h3>EECS Office Hours</h3>
            <div style="display: inline-block;">
                <div
                    class="g-signin2"
                    data-onsuccess="onSignIn"
                    data-theme="dark"
                ></div>
            </div>
            <div>
                <button type="button" class="btn btn-info superOnly" data-toggle="modal" data-target="#createCourseDialog">Create Course</button>
            </div>
            <h5 id="accountMessage" class="text-danger"></h5>
        </div>

        <div id="queueApplication">
            <div class="container">
                <div class="row">
                    <div class="col-xs-3 col-md-2">
                        <ul class="coursePills nav nav-pills nav-stacked"></ul>
                    </div>
                    <div
                        class="coursePanes col-xs-9 col-md-10 tab-content"
                    ></div>
                </div>
            </div>
        </div>

        <!-- modal dialog for showing errors -->
        <div id="oopsDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Oops</h4>
                    </div>
                    <div
                        id="oopsBody"
                        class="modal-body"
                        style="text-align: center;"
                    >
                        <p>
                            Something went wrong - your internet may have just
                            gone out for a moment, or your session might have
                            expired.
                        </p>
                        <p>Try refreshing the page.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for showing errors -->
        <div id="errorDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Sorry, you can't do that.</h4>
                    </div>
                    <div class="modal-body" style="text-align: center;">
                        <p id="errorMessage"></p>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for showing messages sent by a course admin to the user -->
        <div id="messageDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 id="messageDialogHeader" class="modal-title"></h4>
                    </div>
                    <div
                        id="messageDialogContent"
                        class="modal-body"
                        style="text-align: center;"
                    ></div>
                </div>
            </div>
        </div>

        <!-- modal dialog for clearing the queue -->
        <div
            id="clearTheQueueDialog"
            class="modal fade adminOnly"
            role="dialog"
        >
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Clear the queue?</h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="clearInput"
                                    >Enter "clear" to clear ALL requests from
                                    the queue. (DO NOT use this to clear single
                                    requests - what if another one has been
                                    submitted but the page hasn't
                                    refreshed?)</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="clearInput"
                                    placeholder="clear"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for signing up -->
        <div id="signUpDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">
                            Sign up and we'll be with you ASAP!
                        </h4>
                    </div>
                    <div class="modal-body">
                        <form
                            id="signUpForm"
                            role="form"
                            class="form-horizontal"
                        >
                            <div class="form-group">
                                <label
                                    class="control-label col-sm-2"
                                    for="signUpName"
                                    >Name:</label
                                >
                                <div class="col-sm-10">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="signUpName"
                                        required="required"
                                        maxlength="30"
                                        placeholder="Nice to meet you!"
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <label
                                    class="control-label col-sm-2"
                                    for="signUpLocation"
                                    >Meeting Link:</label
                                >
                                <div class="col-sm-10">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="signUpLocation"
                                        required="required"
                                        maxlength="100"
                                        placeholder=""
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <label
                                    class="control-label col-sm-2"
                                    for="signUpDescription"
                                    >Description:</label
                                >
                                <div class="col-sm-10">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="signUpDescription"
                                        required="required"
                                        maxlength="100"
                                        placeholder="e.g. Segfault in function X, using the map data structure, etc."
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <button
                                        id="signUpButton"
                                        type="submit"
                                        class="btn btn-default"
                                    >
                                        Sign Up
                                    </button>
                                </div>
                            </div>
                        </form>
                        <div id="signUpMapMessage">
                            Click the map below (before clicking "Sign Up") to
                            show us where you are!
                        </div>
                        <div
                            id="signUpMapHolder"
                            style="display: none; position: relative;"
                        >
                            <img
                                id="queue-signUpMap"
                                src="img/dude_basement.png"
                            />
                            <!--<span class="queue-signUpPin glyphicon glyphicon-map-marker"></span>-->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for sending a message to a user who is currently on the queue -->
        <div id="sendMessageDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Send Message</h4>
                    </div>
                    <div class="modal-body">
                        <form
                            id="sendMessageForm"
                            role="form"
                            class="form-horizontal"
                        >
                            <div class="form-group">
                                <label
                                    class="control-label col-sm-2"
                                    for="signUpName"
                                    >Message:</label
                                >
                                <div class="col-sm-10">
                                    <input
                                        type="text"
                                        class="form-control"
                                        id="sendMessageContent"
                                        required="required"
                                        maxlength="500"
                                        placeholder="Halp! You're on the queue but we can't find you."
                                    />
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-sm-offset-2 col-sm-10">
                                    <button
                                        id="sendMessageButton"
                                        type="submit"
                                        class="btn btn-default"
                                    >
                                        Send
                                    </button>
                                </div>
                            </div>
                        </form>
                        <!--<form role="form">-->
                        <!--<div class="form-group">-->
                        <!--<label for="clearInput">Enter "clear" to clear ALL requests from the queue.</label>-->
                        <!--<input type="text" class="form-control" id="clearInput" placeholder="clear">-->
                        <!--</div>-->
                        <!--</form>-->
                    </div>
                </div>
            </div>
        </div>

        <!--<div style="width:500px; margin-left: auto; margin-right: auto">-->

        <!--<ul id="queueList" class="list-group"></ul>-->
        <!--</div>-->

        <!-- modal dialog for modifying a queue schedule -->
        <div id="scheduleDialog" class="modal fade adminOnly" role="dialog">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Schedule</h4>
                        <p>Paint over the squares to change their status.</p>
                        <p>
                            Closed
                            <span style="background-color: red;"
                                >&nbsp;&nbsp;&nbsp;</span
                            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Early Sign Up
                            <span style="background-color: blue;"
                                >&nbsp;&nbsp;&nbsp;</span
                            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Open
                            <span style="background-color: green;"
                                >&nbsp;&nbsp;&nbsp;</span
                            >&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </p>
                    </div>
                    <div class="modal-body">
                        <form id="scheduleForm" role="form">
                            <table
                                id="schedulePicker"
                                style="margin-left: auto; margin-right: auto;"
                            ></table>
                            <div
                                class="form-group"
                                style="text-align: center; margin-top: 5px;"
                            >
                                <button
                                    id="updateScheduleButton"
                                    type="submit"
                                    class="btn btn-default"
                                >
                                    Update Schedule
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for modifying queue configuration -->
        <div id="manageQueueDialog" class="modal fade adminOnly" role="dialog">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Manage Queue</h4>
                    </div>
                    <div class="modal-body">
                        <h2>Groups</h2>
                        <form
                            id="groupsForm"
                            role="form"
                            enctype="multipart/form-data"
                        >
                            <div>
                                <label
                                    >Select file to upload:
                                    <input type="file" name="upload" id="groups-upload"
                                /></label>
                                <button
                                    id="uploadGroupsButton"
                                    type="submit"
                                    class="btn btn-default"
                                >
                                    Upload Groups File
                                </button>
                            </div>
                        </form>
                        <a id="checkQueueRosterLink" href="" target="_blank"
                            >Check Queue Roster</a
                        ><br />
                        <a id="checkQueueGroupsLink" href="" target="_blank"
                            >Check Queue Groups</a
                        >

                        <h2>Policies</h2>
                        <form id="policiesForm" role="form">
                            <div class="checkbox">
                                <label
                                    ><input
                                        id="preventUnregisteredCheckbox"
                                        type="checkbox"
                                    />
                                    Prevent students not registered in any group
                                    from signing up at all</label
                                >
                            </div>
                            <div class="checkbox">
                                <label
                                    ><input
                                        id="preventGroupsCheckbox"
                                        type="checkbox"
                                    />
                                    Prevent multiple students in a group from
                                    signing up at the same time</label
                                >
                            </div>
                            <div class="checkbox">
                                <label
                                    ><input
                                        id="prioritizeNewCheckbox"
                                        type="checkbox"
                                    />
                                    Prioritize students who signed up for the
                                    first time this day</label
                                >
                            </div>
                            <div class="checkbox">
                                <label
                                    ><input
                                        id="preventGroupsBoostCheckbox"
                                        type="checkbox"
                                    />
                                    Prevent multiple students in a group from
                                    receiving the boost for first question per
                                    day</label
                                >
                            </div>
                            <button
                                id="updateConfigurationButton"
                                type="submit"
                                class="btn btn-default"
                            >
                                Update Configuration
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for adding an announcement -->
        <div id="addAnnouncementDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Add Announcement</h4>
                    </div>
                    <div class="modal-body">
                        <form
                            id="addAnnouncementForm"
                            role="form"
                            class="form-horizontal"
                        >
                            <div class="form-group">
                                <div class="col-sm-12">
                                    <textarea
                                        id="addAnnouncementContent"
                                        class="form-control"
                                        rows="3"
                                    ></textarea>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-12 text-right">
                                    <button
                                        id="addAnnouncementButton"
                                        type="submit"
                                        class="btn btn-primary"
                                    >
                                        Add Announcement
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for clearing the queue -->
        <div id="removeMyAppointmentDialog" class="modal fade" role="dialog">
            <div class="modal-dialog">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Cancel My Appointment</h4>
                    </div>
                    <div class="modal-body">
                        <div>
                            <div class="form-group">
                                <label for="removeMyAppointmentInput"
                                    >Are you sure? Enter "cancel" to cancel your
                                    appointment.</label
                                >
                                <input
                                    type="text"
                                    class="form-control"
                                    id="removeMyAppointmentInput"
                                    placeholder="cancel"
                                />
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- modal dialog for modifying an appointments schedule -->
        <div
            id="appointmentsScheduleDialog"
            class="modal fade adminOnly"
            role="dialog"
        >
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Appointments Schedule</h4>
                        <p>
                            Select a number here, then paint over timeslots with
                            your mouse to change them.
                        </p>
                        <div
                            id="appointmentsScheduleNumberButtons"
                            class="btn-group"
                            role="group"
                        ></div>
                    </div>
                    <div class="modal-body" style="overflow-y: scroll;">
                        <form
                            id="appointmentsScheduleForm"
                            role="form"
                            style="max-height: 70vh;"
                        >
                            <div id="appt-schedule-picker-container">
                                <!-- pickers inserted by js -->
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        

        <!-- modal dialog for creating a new course -->
        <div id="createCourseDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Create Course</h4>
                    </div>
                    <div class="modal-body">
                        <form id="createCourseForm" role="form">
                            <div>
                                <label>
                                    Short Name
                                </label>
                                <input
                                    id="shortNameInput"
                                    type="text"
                                    required="required"
                                    maxlength="30"
                                    placeholder="e.g. EECS 280"
                                />
                            </div>
                            <div>
                                <label>
                                    Full Name
                                </label>
                                <input
                                    id="fullNameInput"
                                    type="text"
                                    required="required"
                                    maxlength="200"
                                    placeholder="e.g. Programming and Introductory Data Structures"
                                />
                            </div>
                            <button
                                id="createCourseButton"
                                type="submit"
                                class="btn btn-default"
                            >
                                Create Course
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>

        
        <!-- modal dialog for creating a new queue -->
        <div id="createQueueDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Add a Queue to this Course</h4>
                    </div>
                    <div class="modal-body">
                        <form id="createQueueForm" role="form">
                            <div>
                                Type:
                                <br />
                                <input type="radio" id="queueTypeOrderedInput" name="type" value="ordered" />
                                <label for="queueTypeOrderedInput">Ordered</label>
                                <br />
                                <input type="radio" id="queueTypeAppointmentsInput" name="type" value="appointments" />
                                <label for="queueTypeAppointmentsInput">Appointments</label>
                            </div>
                            <div>
                                <label>
                                    Name
                                </label>
                                <input
                                    name="name"
                                    type="text"
                                    required="required"
                                    maxlength="100"
                                    placeholder="e.g. Office Hours"
                                />
                            </div>
                            <div>
                                <label>
                                    Location
                                </label>
                                <input
                                    name="location"
                                    type="text"
                                    required="required"
                                    maxlength="100"
                                    placeholder="e.g. Duderstadt Basement, Online, etc."
                                />
                            </div>
                            <div>
                                <label>
                                    Map File Name (leave blank for no map)
                                </label>
                                <input
                                    name="map"
                                    type="text"
                                    maxlength="100"
                                    placeholder="e.g. duderstadt_basement.png"
                                />
                            </div>
                            <div>
                                <label>
                                    Currently Active? (set this to true)
                                </label>
                                <input
                                    name="active"
                                    type="text"
                                    required="required"
                                    placeholder="true, false"
                                    pattern="true|false"
                                />
                            </div>
                            <button
                                id="createQueueButton"
                                type="submit"
                                class="btn btn-default"
                            >
                                Add Queue
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>


        
        <!-- modal dialog for editing course staff -->
        <div id="editStaffDialog" class="modal fade" role="dialog">
            <div class="modal-dialog modal-lg">
                <!-- Modal content-->
                <div class="modal-content">
                    <div class="modal-header">
                        <button
                            type="button"
                            class="close"
                            data-dismiss="modal"
                        >
                            &times;
                        </button>
                        <h4 class="modal-title">Edit Course Staff</h4>
                    </div>
                    <div class="modal-body">
                        <form id="editStaffForm" role="form">
                            <div>
                                Course Staff (newline separated emails):
                                <br />
                                <textarea name="staff" rows="10" cols="20" style="resize:none"></textarea>
                            </div>
                            <button
                                type="submit"
                                class="btn btn-default"
                            >
                                <span><span class="glyphicon glyphicon-floppy-saved"></span> Saved</span>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </body>
</html>
